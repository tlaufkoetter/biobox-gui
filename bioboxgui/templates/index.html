<html ng-app="BioboxGui">
<head>
    <link data-require="bootstrap-css@3.1.1" data-semver="3.1.1" rel="stylesheet"
          href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
    <script data-require="angular.js@*" data-semver="1.2.14" src="http://code.angularjs.org/1.2.14/angular.js"></script>
    <script data-require="angular-resource@*" data-semver="1.2.13"
            src="http://code.angularjs.org/1.2.13/angular-resource.js"></script>
    <script src="{{ url_for('static', filename='controllers.js') }}"></script>
    <script src="{{ url_for('static', filename='services.js') }}"></script>

    <title>Biobox GUI</title>
</head>
<body>
<div class="container" ng-controller="BioboxController as main">
    <h1>Biobox GUI</h1>
    <div class="breadcrumb">
        <h3>Welcome!</h3>
        Please have a look around.
    </div>
    <div class="row">
        <div class="col-xs-6">
            <h2>Interfaces</h2>
            <select ng-init="selectedInterface = main.getInterface(null)" ng-model="selectedInterface"
                    class="form-control"
                    ng-change="main.getInterface(selectedInterface)"
                    ng-options="interface.name for interface in main.interfaces">
                <option value="">
                    Select an interface
                </option>
            </select>
            <h2>Bioboxes</h2>
            <div ng-hide="!main.bioboxes.length" id="results" class="scroller">
                <div>
                    <table class="table table-striped table-hover clickable">
                        <thead>
                        <tr>
                            <th>Title</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="biobox in main.bioboxes" ng-click="main.selectBiobox(biobox)">
                            {% raw %}
                            <td ng-show="biobox.title"><b>{{ biobox.title }}</b></td>
                            <td ng-show="biobox.description">{{ biobox.description }}</td>
                            {% endraw %}
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <form role="form" ng-submit="main.updateBioboxes()">
                <button type="submit" class="btn btn-default">update</button>
            </form>
        </div>
        <div class="col-xs-6">
            <div ng_hide="main.biobox || main.biobox == 'fail'">
                <h2>Hello there!</h2>
                <p>Please select a Biobox from the left table. Can't see any? Hit the update button!</p>
            </div>
            <div ng-hide="!main.biobox || main.biobox == 'fail'">
                {% raw %}
                <div id="bioboxes-{{ main.biobox.title }}">
                    <h3> {{ main.biobox.image.dockerhub }} </h3>
                    <p> {{ main.biobox.description }}</p>
                    <table class="table">
                        <tbody>
                        <tr>
                            <td>
                                <span aria-hidden="true" class="glyphicon glyphicon-envelope"></span>
                            </td>
                            <td>
                                <a ng-href="https://registry.hub.docker.com/u/{{ main.biobox.image.dockerhub }}">
                                    Docker Image
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span class="glyphicon glyphicon-file"></span>
                            </td>
                            <td>
                                <a ng-href="https://www.ncbi.nlm.nih.gov/pubmed/{{ main.biobox.pmid }}">
                                    Pubmed Entry
                                </a>
                            </td>
                        </tr>
                        <tr ng-hide="!main.biobox.homepage">
                            <td>
                                <span class="glyphicon glyphicon-ok biobox-item-good"></span>
                            </td>
                            <td>
                                <a ng-href="{{ main.biobox.homepage }}">
                                    Homepage
                                </a>
                            </td>
                        </tr>
                        <tr ng-hide="main.biobox.homepage">
                            <td>
                                <span class="glyphicon glyphicon-remove biobox-item-bad"></span>
                            </td>
                            <td> No homepage available</td>
                        </tr>
                        <tr ng-hide="!main.biobox.image.source">
                            <td>
                                <span class="glyphicon glyphicon-ok biobox-item-good"></span>
                            </td>
                            <td>
                                <a ng-href="{{ main.biobox.image.source }}">
                                    Source Code Repository
                                </a>
                            </td>
                        </tr>
                        <tr ng-hide="main.biobox.image.source">
                            <td>
                                <span class="glyphicon glyphicon-remove biobox-item-bad"></span>
                            </td>
                            <td> No source code repository available</td>
                        </tr>
                        <tr ng-hide="!main.biobox.mailing_list">
                            <td>
                                <span class="glyphicon glyphicon-ok biobox-item-good"></span>
                            </td>
                            <td>
                                <a ng-href="{{ main.biobox.mailing_list }}">
                                    Mailing List
                                </a>
                            </td>
                        </tr>
                        <tr ng-hide="main.biobox.mailing_list">
                            <td>
                                <span class="glyphicon glyphicon-remove biobox-item-bad"></span>
                            </td>
                            <td> No mailing list available</td>
                        </tr>
                        </tbody>
                    </table>
                    <h4>Tasks</h4>
                    <table class="table table-striped">
                        <tbody>
                        <tr ng-repeat="task in main.biobox.tasks">
                            <td>
                                <b>{{ task.name }}</b>
                            </td>
                            <td>
                                {{ task.interface }}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                {% endraw %}
            </div>
            <div ng-hide="main.biobox != 'fail'">
                <h2>Error</h2>
                <p>You requested Biobox could not be delivered.</p>
            </div>
        </div>
    </div>
</div>
</body>
</html>